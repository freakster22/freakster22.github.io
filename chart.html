<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Proficiency Chart</title>
    <link rel="stylesheet" href="asset/chartStyle.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: transparent;
        }
    </style>
</head>
<body>

<div class="chart-container">
    <div class="chart-title">Skill Proficiency</div>

        <div class="language-bar">
        <div class="language-name">Appian</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 85%;" data-skill="Appian" data-value="85">
                <span class="bar-label">85%</span>
            </div>
        </div>
    </div>

    <div class="language-bar">
        <div class="language-name">SQL</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 80%;" data-skill="SQL" data-value="80">
                <span class="bar-label">80%</span>
            </div>
        </div>
    </div>
	<div class="language-bar">
        <div class="language-name">JAVA</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 55%;" data-skill="JAVA" data-value="55">
                <span class="bar-label">55%</span>
            </div>
        </div>
    </div>
	<div class="language-bar">
        <div class="language-name">HTML</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 55%;" data-skill="HTML" data-value="55">
                <span class="bar-label">55%</span>
            </div>
        </div>
    </div>

    <div class="language-bar">
        <div class="language-name">CSS</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 30%;" data-skill="CSS" data-value="30">
                <span class="bar-label">30%</span>
            </div>
        </div>
    </div>

    <div class="language-bar">
        <div class="language-name">GIT</div>
        <div class="bar-wrapper">
            <div class="bar-fill" style="width: 85%;" data-skill="GIT" data-value="85">
                <span class="bar-label">85%</span>
            </div>
        </div>
    </div>

    <div class="x-axis">
        <div class="x-axis-line"></div>
        <div class="x-axis-break" style="left: 0;">0</div>
        <div class="x-axis-break" style="left: 30%;">20</div>
        <div class="x-axis-break" style="left: 50%;">50</div>
        <div class="x-axis-break" style="left: 100%; transform: translateX(-100%);">100</div>
    </div>
</div>
<script>
  // Define theme colors
  var lightVars = {
    "--chart-bg-color": "#eedede",
    "--chart-text-color": "#000000",
    "--chart-bar-color": "#2e5f15",
    "--chart-axis-color": "#333333",
    "--chart-label-color": "#744C0F"
  };
  
  var darkVars = {
    "--chart-bg-color": "#4f4e4e",
    "--chart-text-color": "#eedede",
    "--chart-bar-color": "#4e6542",
    "--chart-axis-color": "#cccccc",
    "--chart-label-color": "#ab86ef"
  };

  // Apply theme colors to CSS variables
  function setTheme(mode) {
    console.log("Setting chart theme to:", mode);
    document.documentElement.setAttribute("color-mode", mode);
    
    var vars = mode === "light" ? lightVars : darkVars;
    var root = document.documentElement;
    
    for (var key in vars) {
      root.style.setProperty(key, vars[key]);
    }
  }

  // Get initial theme from localStorage
  var initialMode = localStorage.getItem("color-mode") || "light";
  setTheme(initialMode);

  // Listen for messages from parent window (postMessage)
  window.addEventListener("message", function(e) {
    console.log("Chart received message:", e.data);
    if (e.data.colorMode) {
      setTheme(e.data.colorMode);
    }
  });

  // Also listen for storage changes as fallback
  window.addEventListener("storage", function(e) {
    if (e.key === "color-mode" && e.newValue) {
      setTheme(e.newValue);
    }
  });

  // Add hover tooltip functionality
  var barFills = document.querySelectorAll(".bar-fill");
  barFills.forEach(function(bar) {
    bar.addEventListener("mouseenter", function() {
      var skill = this.getAttribute("data-skill");
      var value = this.getAttribute("data-value");
      this.classList.add("highlighted");
      
      // Create tooltip
      var tooltip = document.createElement("div");
      tooltip.className = "skill-tooltip";
      tooltip.textContent = skill + ": " + value + "%";
      this.appendChild(tooltip);
    });

    bar.addEventListener("mouseleave", function() {
      this.classList.remove("highlighted");
      var tooltip = this.querySelector(".skill-tooltip");
      if (tooltip) {
        tooltip.remove();
      }
    });
  });
</script>
</body>
</html>